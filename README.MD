# PO.GPT ğŸŒâœ¨

---
> THE README IS GENERATED BY LLM, LOL.

A powerful CLI tool that leverages AI to automatically translate GNU gettext PO/POT files. Say goodbye to manual translation work!

## Features

- ğŸ¤– **AI-Powered Translation** - Uses OpenAI-compatible APIs (OpenAI, Claude, local models, etc.)
- ğŸ“¦ **Batch Processing** - Efficiently translates multiple entries in batches
- ğŸ”„ **Smart Merging** - Merges POT templates with existing PO files
- ğŸ’° **Cost Tracking** - Real-time token usage and cost estimation
- ğŸ¯ **Context-Aware** - Passes msgctxt to AI for more accurate translations
- ğŸ§ª **Dry Run Mode** - Test translations without making API calls or modifying files
- âš¡ **Multiple Languages** - Translate to multiple target languages in one go
- ğŸ“Š **Beautiful CLI** - Rich terminal UI with progress indicators

## Installation

### As a .NET Tool
[nuget](https://www.nuget.org/packages/rorokaii.po.gpt/)
```bash
dotnet tool install --global rorokaii.po.gpt
```

## Quick Start

### 1. Create a Configuration File

Create a `config.yaml` file in your project root:

```yaml
project:
  name: "My Awesome App"
  context: "A web application for task management"
  basePath: "./locales"

translate:
  targetLanguages:
    - "zh_CN"
    - "ja_JP"
    - "fr_FR"
  inputPattern: "*.pot"
  outputPattern: "{lang}/{file}.po"
  skipTranslated: true
  batchSize: 20

llm:
  model: "gpt-4o"
  apiKey: "your-api-key-here"
  apiBase: "https://api.openai.com/v1"
  prompt: "Describe the specification of the project."
```

### 2. Organize Your Files

```
your-project/
â”œâ”€â”€ config.yaml
â””â”€â”€ locales/
    â””â”€â”€ messages.pot
```

### 3. Run Translation

```bash
# Live translation
po-gpt config.yaml

# Dry run (no API calls, no file modifications)
po-gpt config.yaml --dry-run
```

## Configuration Reference

### Project Section

```yaml
project:
  name: "Project Name"           # Your project name
  context: "Brief description"   # Helps AI understand the context
  basePath: "./locales"          # Base path for PO/POT files
```

### Translate Section

```yaml
translate:
  targetLanguages:               # List of target languages
    - "zh_CN"
    - "ja_JP"
  inputPattern: "*.pot"          # Pattern to find POT files
  outputPattern: "{lang}/{file}.po"  # Output path pattern
  skipTranslated: true           # Skip already translated entries
  batchSize: 20                  # Number of entries per API call
```

**Pattern Variables:**
- `{lang}` - Target language code
- `{file}` - Original filename without extension

### LLM Section

```yaml
llm:
  model: "gpt-4o"                # Model name
  apiKey: "sk-..."               # Your API key
  apiBase: "https://api.openai.com/v1"  # API endpoint
  prompt: "Custom instructions"  # Additional translation instructions
```

**Supported Models:**
- OpenAI: `gpt-4o`, `gpt-4-turbo`, `gpt-3.5-turbo`
- Claude: `claude-3-5-sonnet-20241022`, `claude-3-opus-20240229`
- Local models: Any OpenAI-compatible endpoint

## Usage Examples

### Basic Translation

```bash
po-gpt config.yaml
```

### Dry Run (Testing)

```bash
po-gpt config.yaml --dry-run
```

This will:
- âœ… Parse all files
- âœ… Show what would be translated
- âœ… Estimate token costs
- âŒ Not call the API
- âŒ Not modify any files


## PO File Context Support

PO.GPT fully supports `msgctxt` for context-aware translations:

```po
# Context helps AI provide accurate translations
msgctxt "button"
msgid "Save"
msgstr ""

msgctxt "menu_item"
msgid "Save"
msgstr ""

msgctxt "error_message"
msgid "Save"
msgstr ""
```

The AI will receive the context and translate accordingly.

## Token Usage & Cost Estimation

After translation, you'll see a detailed report:

```
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ğŸ’° Token Statistics â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®                            â”‚
â”‚ â”‚ Token Usage       â”‚  Amount â”‚                            â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                            â”‚
â”‚ â”‚ Prompt tokens     â”‚  12,450 â”‚                            â”‚
â”‚ â”‚ Completion tokens â”‚   8,230 â”‚                            â”‚
â”‚ â”‚ Total tokens      â”‚  20,680 â”‚                            â”‚
â”‚ â”‚                   â”‚         â”‚                            â”‚
â”‚ â”‚ Estimated cost    â”‚ $0.4136 â”‚                            â”‚
â”‚ â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯                            â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
```

## Advanced Features

### Skip Already Translated Entries

```yaml
translate:
  skipTranslated: true  # Only translate new/empty entries
```

### Batch Size Optimization

Larger batches = fewer API calls but may hit token limits:

```yaml
translate:
  batchSize: 50  # Increase for efficiency (default: 20)
```

### Multiple POT Files

The tool automatically discovers all POT files:

```
locales/
â”œâ”€â”€ app.pot          # Will be translated
â”œâ”€â”€ errors.pot       # Will be translated
â””â”€â”€ emails.pot       # Will be translated
```

## Credits

Built with:
- [Karambolo.PO](https://github.com/adams85/po) - PO file parsing
- [OpenAI SDK](https://github.com/openai/openai-dotnet) - AI integration
- [Spectre.Console](https://spectreconsole.net/) - Beautiful CLI
- [VYaml](https://github.com/hadashiA/VYaml) - YAML configuration
nslation